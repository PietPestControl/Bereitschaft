<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Samstags-Bereitschaft</title>
<style>
  body { font-family: sans-serif; margin: 1rem; background: #f8f8f8; }
  h1 { text-align: center; }
  table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
  th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
  th { background: #eee; }
  button { padding: 0.3rem 0.5rem; }
  form { margin-top: 1rem; display: none; }
  input, textarea { width: 100%; margin-bottom: 0.5rem; }
</style>
</head>
<body>

<h1>Samstags-Bereitschaft</h1>
<table id="plan">
<thead>
<tr><th>Datum</th><th>Dienst</th><th></th></tr>
</thead>
<tbody></tbody>
</table>

<form id="tauschForm">
<input type="hidden" id="datum">
<input type="text" id="name" placeholder="Dein Name" required>
<input type="text" id="partner" placeholder="Tauschpartner">
<textarea id="info" placeholder="Bemerkung"></textarea>
<button type="submit">Tausch anfragen</button>
</form>

<script>
const personen = ["Person A","Person B","Person C","Person D","Person E","Person F","Person G"];
const startDatum = new Date("2025-01-04");
const wochen = 20;
const empfaenger = "DEINE-MAIL@FIRMA.DE";

const tbody = document.querySelector("#plan tbody");
const form = document.getElementById("tauschForm");
const datumFeld = document.getElementById("datum");

function formatDate(d){return d.toLocaleDateString("de-DE");}

for(let i=0;i<wochen;i++){
  const d = new Date(startDatum);
  d.setDate(d.getDate()+i*7);
  const person = personen[i % personen.length];
  const tr = document.createElement("tr");
  tr.innerHTML = `<td>${formatDate(d)}</td><td>${person}</td><td><button onclick="tausch('${formatDate(d)}')">Tausch</button></td>`;
  tbody.appendChild(tr);
}

function tausch(d){datumFeld.value=d; form.style.display="block";}

form.addEventListener("submit",e=>{
  e.preventDefault();
  const name=document.getElementById("name").value;
  const partner=document.getElementById("partner").value;
  const info=document.getElementById("info").value;
  const body=`Tauschanfrage f√ºr ${datumFeld.value}\n\nVon: ${name}\nMit: ${partner}\n\n${info}`;
  window.location.href=`mailto:${empfaenger}?subject=Tauschanfrage Bereitschaft&body=${encodeURIComponent(body)}`;
  form.reset();
  form.style.display="none";
});
</script>

</body>
</html>
